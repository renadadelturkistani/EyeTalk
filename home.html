<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ุงูุฑุฆูุณูุฉ - EyeTalk</title>

  <!-- โ ุงูุฎุทูุท ูุงูุชุตููู -->
  <link rel="stylesheet" href="style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

  <!-- โ ููุชุจุฉ ุชุชุจุน ุงููุธุฑ -->
  <script src="https://api.gazerecorder.com/GazeCloudAPI.js"></script>

  <!-- โ ููุชุจุฉ ุงููุทู (ResponsiveVoice) -->
  <script src="https://code.responsivevoice.org/responsivevoice.js?key=2VYhW4Qe"></script>
</head>

<body class="theme-dark">

  <!-- โ ุงูููุฏุฑ -->
  <header>
    <span class="menu-toggle" id="menuToggle" aria-label="ูุชุญ ุงููุงุฆูุฉ">โฐ</span>
    <h1 class="app-title">ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</h1>

    <!-- โ ุงููููู -->
    <div class="logo">
      <img src="logo.png" alt="ุดุนุงุฑ ุงููููุน" />
    </div>
  </header>

  <!-- โ ุงูุดุฑูุท ุงูุฌุงูุจู -->
  <aside id="sidebar" class="sidebar" aria-label="ุงูุดุฑูุท ุงูุฌุงูุจู">
    <h2>ุงููุงุฆูุฉ</h2>
    <nav>
      <a href="home.html">ุงูุฑุฆูุณูุฉ</a>
      <a href="icons-edit.html">ุชุนุฏูู ุงูุฃููููุงุช</a>
      <a href="settings.html">ุงูุฅุนุฏุงุฏุงุช</a>
      <a href="profile.html">ุงูููู ุงูุดุฎุตู</a>
      <a href="about.html">ุนู ุงูุชุทุจูู</a>
      <a href="contact.html">ุชูุงุตู</a>
    </nav>

    <hr style="opacity:.15;margin:14px 0">
    <a class="danger-link" href="logout.html">ุชุณุฌูู ุฎุฑูุฌ</a>
  </aside>

  <div id="overlay"></div>

  <!-- โ ุงููุญุชูู ุงูุฑุฆูุณู -->
  <main class="page-wrap">
    <h2 class="hero">ุนุจุฑ ุนู ุงุญุชูุงุฌู ุจูุธุฑุฉ</h2>

    <!-- ุดุจูุฉ ุงูุฃููููุงุช -->
    <section id="iconsContainer"></section>

    <!-- โ ุฒุฑ ุชูุนูู ุงูุตูุช -->
    <div style="text-align:center; margin-top:30px;">
      <button id="activateSound" style="
        background:#00c2ff;
        color:#fff;
        border:none;
        padding:12px 25px;
        border-radius:12px;
        font-size:18px;
        cursor:pointer;
        transition:0.3s;
      ">
        ุชูุนูู ุงููุทู
      </button>
    </div>
  </main>

  <!-- โ ูุคุดุฑ ุงููุธุฑ -->
  <div id="cursorDot"></div>

  <!-- โ ุฒุฑ ุงูุทูุงุฑุฆ -->
  <button id="stopAlarm" type="button">ุฅููุงู ุงูุทูุงุฑุฆ</button>

  <!-- โ ุณูุฑุจุช ุงูุชุฑุญูุจ ูุงููุทู -->
  <script>
  /* =========================================================
     ๐ ูุธุงู ุงููุทู ุงูุฐูู + ุฒุฑ ุงูุชูุนูู
  ========================================================= */

  function sanitizeText(text) {
    if (!text) return "";
    let t = String(text);
    t = t.replace(/<[^>]*>/g, "");
    try {
      t = t.replace(/[\p{Emoji_Presentation}\p{Extended_Pictographic}]/gu, "");
    } catch (_) {
      t = t.replace(/[\u{1F300}-\u{1FAFF}\u{2600}-\u{27BF}]/gu, "");
    }
    return t.replace(/\s+/g, " ").trim();
  }

  // ๐ฃ๏ธ ุงููุทู ุจุงุณุชุฎุฏุงู ุงูููุชุจุฉ ุฃู ุงููุธุงู
  function speak(text) {
    const clean = sanitizeText(text);
    if (!clean) return;

    if (typeof responsiveVoice !== "undefined" && responsiveVoice.voiceSupport()) {
      responsiveVoice.speak(clean, "Arabic Female");
    } else {
      const msg = new SpeechSynthesisUtterance(clean);
      msg.lang = "ar-SA";
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(msg);
    }
  }

  // ๐ง ุฒุฑ ุชูุนูู ุงูุตูุช + ุงูุชุฑุญูุจ ููุฑุฉ ูุงุญุฏุฉ ููุท
  window.addEventListener("load", () => {
    const activateBtn = document.getElementById("activateSound");

    // ูู ุงูุตูุช ููุนูู ูู ูุจูุ ูุฎูู ุงูุฒุฑ
    if (localStorage.getItem("soundActivated") === "true") {
      if (activateBtn) activateBtn.style.display = "none";
      return;
    }

    // ุนูุฏ ุงูุถุบุท ูุฃูู ูุฑุฉ
    if (activateBtn) {
      activateBtn.addEventListener("click", () => {
        if (!localStorage.getItem("welcomePlayed")) {
          speak("ูุฑุญุจูุง ุจู ูู ุชุทุจูู ุขู ุชูู");
          localStorage.setItem("welcomePlayed", "true");
        }
        setTimeout(() => activateBtn.style.display = "none", 1500);
        localStorage.setItem("soundActivated", "true");
      });
    }
  });
  </script>

  <!-- โ ููุชุจุงุช ุงููุดุฑูุน -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <!-- โ ุณูุฑุจุช ุงููุดุฑูุน ุงูุฑุฆูุณู -->
  <script src="script.js"></script>

</body>
</html>
