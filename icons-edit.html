<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ุชุนุฏูู ุงูุฃููููุงุช - EyeTalk</title>
  <link rel="stylesheet" href="style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
</head>

<body>

  <header>
    <span class="menu-toggle" aria-label="ูุชุญ ุงููุงุฆูุฉ">โฐ</span>
    <h1 class="app-title">ุชุนุฏูู ุงูุฃููููุงุช</h1>
    <div class="logo">
      <img src="logo.png" alt="ุดุนุงุฑ ุงููููุน" />
    </div>
  </header>

  <!-- โ ุงูุดุฑูุท ุงูุฌุงูุจู -->
  <aside id="sidebar" class="sidebar" aria-label="ุงูุดุฑูุท ุงูุฌุงูุจู">
    <h2>ุงููุงุฆูุฉ</h2>
    <nav>
      <a href="home.html">ุงูุฑุฆูุณูุฉ</a>
      <a href="icons-edit.html" class="active">ุชุนุฏูู ุงูุฃููููุงุช</a>
      <a href="settings.html">ุงูุฅุนุฏุงุฏุงุช</a>
      <a href="profile.html">ุงูููู ุงูุดุฎุตู</a>
      <a href="about.html">ุนู ุงูุชุทุจูู</a>
      <a href="contact.html">ุชูุงุตู</a>
    </nav>
    <hr style="opacity:.15;margin:14px 0">
    <a class="danger-link" href="logout.html">ุชุณุฌูู ุฎุฑูุฌ</a>
  </aside>

  <div id="overlay"></div>

  <main class="page-wrap">
    <section class="card">
      <h2 class="card-title">ูุงุฆูุฉ ุงูุฃููููุงุช</h2>
      <p class="muted">ููููู ุชุฎุตูุต ุงูุฃููููุงุช ูุงููุตูุตุ ูุณูุชู ุญูุธ ุงูุชุบููุฑุงุช ูุชุญุฏูุซ ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ ุชููุงุฆููุง</p>

      <div id="editor" style="display:grid;grid-template-columns:repeat(3,1fr);gap:var(--grid-gap)"></div>

      <!-- โ ุฃุฒุฑุงุฑ ุงูุชุญูู -->
<div style="
  margin-top:20px; 
  display:flex; 
  justify-content:center; 
  align-items:center; 
  gap:12px; 
  flex-wrap:wrap;
">
  <button id="addIcon">โ ุฅุถุงูุฉ ุฃููููุฉ</button>
  <button id="resetIcons" class="danger">โฉ๏ธ ุงููุถุน ุงูุงูุชุฑุงุถู</button>
  <button id="saveChanges" 
    style="background-color:#1e40af; color:#fff; border:none; padding:10px 16px; border-radius:6px; font-weight:bold; cursor:pointer;">
    ๐พ ุญูุธ ุงูุชุบููุฑุงุช
  </button>
</div>


  <!-- Firebase + EmailJS -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <script>
    const editor = document.getElementById('editor');
    const defaults = [
      { emoji: "๐จ", label: "ุญุงูุฉ ุทุงุฑุฆุฉ", fixed: true }, // ๐ ุบูุฑ ูุงุจูุฉ ููุญุฐู
      { emoji: "๐ง",  label: "ุฃุฑูุฏ ุงููุงุก" },
      { emoji: "๐ฝ๏ธ", label: "ุฃุฑูุฏ ุงูุทุนุงู" },
      { emoji: "๐",  label: "ุฃุฑูุฏ ุงูุฏูุงุก" },
      { emoji: "๐ถโโ๏ธ", label: "ุฃุฑูุฏ ุงููุดู" },
      { emoji: "๐ป",  label: "ุฃุฑูุฏ ุงูุญูุงู" }
    ];

    const load = () => JSON.parse(localStorage.getItem('customIcons')) || defaults;
    const save = (l) => localStorage.setItem('customIcons', JSON.stringify(l));

    function render() {
      const list = load();
      editor.innerHTML = '';

      list.forEach((it, i) => {
        const c = document.createElement('div');
        c.className = 'card';
        c.style.textAlign = 'center';
        c.style.padding = '20px';
        c.style.borderRadius = '12px';

        // ๐น ุจูุงุก ูุญุชูู ุงูุฃููููุฉ
        c.innerHTML = `
          <div class="icon-emoji" style="font-size:40px; margin:0 auto">${it.emoji}</div>
          <div class="icon-label" style="margin:.4rem 0 0; font-weight:bold">${it.label}</div>

          <label style="display:block; text-align:right; font-weight:600; color:#cbd5e1; margin:6px 0 4px;">ุฃููููุฉ</label>
          <input data-i="${i}" data-k="emoji" type="text" value="${it.emoji}" placeholder="ุฅูููุฌู"
            style="width:100%; padding:10px; border:none; border-radius:8px; background-color:#0f2e52; color:#fff; text-align:center; font-size:18px;"/>

          <label style="display:block; text-align:right; font-weight:600; color:#cbd5e1; margin:8px 0 4px;">ุงููุต</label>
          <input data-i="${i}" data-k="label" type="text" value="${it.label}" placeholder="ูุต"
            style="width:100%; padding:10px; border:none; border-radius:8px; background-color:#0f2e52; color:#fff; text-align:center; font-size:16px;"/>

          ${
            it.fixed
              ? `<button disabled style="margin-top:.7rem; background:#b91c1c; color:#fff; opacity:.6; border:none; border-radius:6px; padding:8px 14px;">ุบูุฑ ูุงุจู ููุญุฐู</button>`
              : `<button data-i="${i}" data-act="del" class="danger" style="margin-top:.7rem;">ุญุฐู</button>`
          }
        `;
        editor.appendChild(c);
      });
    }

    // ๐น ุชุญุฏูุซ ููุฑู ุนูุฏ ุชุนุฏูู ุงููุต ุฃู ุงูุฅูููุฌู
    editor.addEventListener('input', (e) => {
      const i = +e.target.dataset.i, k = e.target.dataset.k;
      if (Number.isNaN(i) || !k) return;
      const list = load();
      list[i][k] = e.target.value;
      save(list);
    });

    // ๐น ููุน ุญุฐู ุฃููููุฉ ุงูุทูุงุฑุฆ
    editor.addEventListener('click', (e) => {
      if (e.target.dataset.act === 'del') {
        const i = +e.target.dataset.i;
        const list = load();
        if (list[i].fixed) return; // ๐ซ ููููุน ุญุฐู ุงูุทูุงุฑุฆ
        list.splice(i, 1);
        save(list);
        render();
      }
    });

    // ๐น ุฅุถุงูุฉ ุฃููููุฉ ุฌุฏูุฏุฉ
    document.getElementById('addIcon').onclick = () => {
      const l = load();
      l.push({ emoji: "๐", label: "ูุต ุฌุฏูุฏ" });
      save(l);
      render();
    };

    // ๐น ุฅุนุงุฏุฉ ุงููุถุน ุงูุงูุชุฑุงุถู
    document.getElementById('resetIcons').onclick = () => {
      save(defaults);
      render();
    };

    // ๐น ุฒุฑ ุญูุธ ุงูุชุบููุฑุงุช
    document.getElementById('saveChanges').onclick = () => {
      alert("โ ุชู ุญูุธ ุงูุชุบููุฑุงุช ุจูุฌุงุญ!");
    };

    render();
  </script>

  <script src="script.js"></script>
</body>


</html>
