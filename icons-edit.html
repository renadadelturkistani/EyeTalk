<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª - EyeTalk</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --grid-gap: 1rem;
    }

    body {
      font-family: 'Cairo', sans-serif;
      margin: 0;
      background-color: #0f172a;
      color: #fff;
      overflow-x: hidden;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #1e293b;
      padding: 12px 16px;
      border-bottom: 2px solid #334155;
    }

    .app-title {
      font-weight: 900;
      font-size: 1.3rem;
    }

    .logo img {
      height: 40px;
    }

    .page-wrap {
      padding: 20px;
      max-width: 1000px;
      margin: 0 auto;
    }

    .card {
      background: #1e293b;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .card-title {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: .5rem;
    }

    .muted {
      color: #94a3b8;
      font-size: .9rem;
      margin-bottom: 1rem;
    }

    /* âœ… Ø´Ø¨ÙƒØ© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
    #editor {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--grid-gap);
      box-sizing: border-box;
      max-width: 100%;
      width: 100%;
      margin: 0 auto;
      padding: var(--grid-gap);
    }

    /* Ø´ÙƒÙ„ Ø§Ù„ÙƒØ±ÙˆØª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø¨ÙƒØ© */
    #editor > div {
      background: #0f2e52;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      transition: transform 0.2s;
    }

    #editor > div:hover {
      transform: scale(1.03);
    }

    /* ğŸ¯ ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬ÙˆØ§Ù„ */
    @media (max-width: 600px) {
      #editor {
        grid-template-columns: repeat(2, 1fr); /* Ø¹Ù…ÙˆØ¯ÙŠÙ† */
        grid-auto-rows: 1fr;
        gap: 0.7rem;
        padding: 0.7rem;
      }

      body {
        font-size: 15px;
      }

      .card {
        padding: 1rem;
      }

      header {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }

      .logo img {
        height: 32px;
      }

      .app-title {
        font-size: 1.1rem;
      }
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
    button {
      padding: 10px 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: 0.2s;
    }

    button:hover {
      opacity: 0.85;
    }

    .danger {
      background-color: #b91c1c;
      color: #fff;
    }

    #addIcon {
      background-color: #15803d;
      color: #fff;
    }

    #resetIcons {
      background-color: #f59e0b;
      color: #000;
    }
  </style>
</head>

<body>

  <header>
    <span class="menu-toggle" aria-label="ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">â˜°</span>
    <h1 class="app-title">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª</h1>
    <div class="logo">
      <img src="logo.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹" />
    </div>
  </header>

  <aside id="sidebar" class="sidebar" aria-label="Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ">
    <h2>Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h2>
    <nav>
      <a href="home.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a href="icons-edit.html" class="active">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª</a>
      <a href="settings.html">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
      <a href="profile.html">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a>
      <a href="about.html">Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</a>
      <a href="contact.html">ØªÙˆØ§ØµÙ„</a>
    </nav>
    <hr style="opacity:.15;margin:14px 0">
    <a class="danger-link" href="logout.html">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</a>
  </aside>

  <div id="overlay"></div>

  <main class="page-wrap">
    <section class="card">
      <h2 class="card-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª</h2>
      <p class="muted">ÙŠÙ…ÙƒÙ†Ùƒ ØªØ®ØµÙŠØµ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙˆØ§Ù„Ù†ØµÙˆØµØŒ ÙˆØ³ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§</p>

      <!-- âœ… Ø§Ù„Ø´Ø¨ÙƒØ© -->
      <div id="editor"></div>

      <!-- âœ… Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
      <div style="margin-top:20px; display:flex; justify-content:center; align-items:center; gap:12px; flex-wrap:wrap;">
        <button id="addIcon">â• Ø¥Ø¶Ø§ÙØ© Ø£ÙŠÙ‚ÙˆÙ†Ø©</button>
        <button id="resetIcons" class="danger">â†©ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</button>
        <button id="saveChanges" style="background-color:#1e40af; color:#fff;">
          ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
        </button>
      </div>
    </section>
  </main>

  <!-- Firebase + EmailJS -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <script>
    const editor = document.getElementById('editor');
    const defaults = [
      { emoji: "ğŸš¨", label: "Ø­Ø§Ù„Ø© Ø·Ø§Ø±Ø¦Ø©", fixed: true },
      { emoji: "ğŸ’§",  label: "Ø£Ø±ÙŠØ¯ Ø§Ù„Ù…Ø§Ø¡" },
      { emoji: "ğŸ½ï¸", label: "Ø£Ø±ÙŠØ¯ Ø§Ù„Ø·Ø¹Ø§Ù…" },
      { emoji: "ğŸ’Š",  label: "Ø£Ø±ÙŠØ¯ Ø§Ù„Ø¯ÙˆØ§Ø¡" },
      { emoji: "ğŸš¶â€â™€ï¸", label: "Ø£Ø±ÙŠØ¯ Ø§Ù„Ù…Ø´ÙŠ" },
      { emoji: "ğŸš»",  label: "Ø£Ø±ÙŠØ¯ Ø§Ù„Ø­Ù…Ø§Ù…" }
    ];

    const load = () => JSON.parse(localStorage.getItem('customIcons')) || defaults;
    const save = (l) => localStorage.setItem('customIcons', JSON.stringify(l));

    function render() {
      const list = load();
      editor.innerHTML = '';

      list.forEach((it, i) => {
        const c = document.createElement('div');
        c.className = 'card';
        c.style.textAlign = 'center';
        c.style.padding = '20px';
        c.style.borderRadius = '12px';

        c.innerHTML = `
          <div class="icon-emoji" style="font-size:40px; margin:0 auto">${it.emoji}</div>
          <div class="icon-label" style="margin:.4rem 0 0; font-weight:bold">${it.label}</div>

          <label style="display:block; text-align:right; font-weight:600; color:#cbd5e1; margin:6px 0 4px;">Ø£ÙŠÙ‚ÙˆÙ†Ø©</label>
          <input data-i="${i}" data-k="emoji" type="text" value="${it.emoji}" placeholder="Ø¥ÙŠÙ…ÙˆØ¬ÙŠ"
            style="width:100%; padding:10px; border:none; border-radius:8px; background-color:#0f2e52; color:#fff; text-align:center; font-size:18px;"/>

          <label style="display:block; text-align:right; font-weight:600; color:#cbd5e1; margin:8px 0 4px;">Ø§Ù„Ù†Øµ</label>
          <input data-i="${i}" data-k="label" type="text" value="${it.label}" placeholder="Ù†Øµ"
            style="width:100%; padding:10px; border:none; border-radius:8px; background-color:#0f2e52; color:#fff; text-align:center; font-size:16px;"/>

          ${
            it.fixed
              ? `<button disabled style="margin-top:.7rem; background:#b91c1c; color:#fff; opacity:.6; border:none; border-radius:6px; padding:8px 14px;">ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø­Ø°Ù</button>`
              : `<button data-i="${i}" data-act="del" class="danger" style="margin-top:.7rem;">Ø­Ø°Ù</button>`
          }
        `;
        editor.appendChild(c);
      });
    }

    editor.addEventListener('input', (e) => {
      const i = +e.target.dataset.i, k = e.target.dataset.k;
      if (Number.isNaN(i) || !k) return;
      const list = load();
      list[i][k] = e.target.value;
      save(list);
    });

    editor.addEventListener('click', (e) => {
      if (e.target.dataset.act === 'del') {
        const i = +e.target.dataset.i;
        const list = load();
        if (list[i].fixed) return;
        list.splice(i, 1);
        save(list);
        render();
      }
    });

    document.getElementById('addIcon').onclick = () => {
      const l = load();
      l.push({ emoji: "ğŸ™‚", label: "Ù†Øµ Ø¬Ø¯ÙŠØ¯" });
      save(l);
      render();
    };

    document.getElementById('resetIcons').onclick = () => {
      save(defaults);
      render();
    };

    document.getElementById('saveChanges').onclick = () => {
      alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
    };

    render();
  </script>
</body>
</html>
